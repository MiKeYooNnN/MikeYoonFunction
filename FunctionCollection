def logistic_summary_withcategory(data, cat_col, non_cat_col  = False):
    
    data.rename(columns = lambda x: str.replace(x, " ", "_"), inplace = True)
    
    cat_col = list(map( lambda x: str.replace(x, " ", "_"), cat_col))
    
    non_cat_col = list(map( lambda x: str.replace(x, " ", "_"), non_cat_col))

    X = data.drop(columns ="label")
    Y = data["label"]
    
    def getdesignmatrix(data, col_ls):
        formula =""
        for i in col_ls:
            formula = formula + " + " + i
        
        formula = formula[2:]
        dmatrix = patsy.dmatrix(formula, data= data)
        
        df = pd.DataFrame(dmatrix, columns = dmatrix.design_info.column_names)
        
        return(df)
    
    dmatrix = getdesignmatrix(X, cat_col)
    
    
    if non_cat_col == False:
        X  = dmatrix
    else:
    
        X= pd.concat([X[non_cat_col], dmatrix], axis = 1 )
        
    
    logit = sm.Logit(Y, X)
    
    result = logit.fit()
    
    print(result.summary())
    
    print(np.exp(result.params))
    
    print(result.pvalues)
    
    print(np.exp(result.conf_int()))
    
